# 二、涵盖数据库基础知识

如您所见，数据科学围绕着更好地理解您的数据。这就是为什么您将使用数据库来访问您提出有趣问题所需的数据。有许多不同类型的数据库。此外，还有许多专门用于数据库的术语。您需要熟悉数据库领域中使用的基本概念和术语，以及不同数据库的组织方式。

## 与关系数据库建立连接

数据科学家将处理许多不同形式的数据，包括遗留数据库或旧电子表格。他们也可以处理图片和视频。作为一名数据科学家，您应该熟悉组织存储数据的常见方式。大多数组织都有各种各样的数据库。其中一些非常现代，另一些则不那么现代。

理解这些不同技术的最好方法是从头开始。即使是最现代的数据库也常常建立在超过 50 年的技术之上。现代数据库真正开始于 20 世纪 60 年代后期的阿波罗太空任务。前往月球的火箭需要数百万个零件，NASA 与 IBM 合作创建了一个信息管理系统(IMS)来组织这些数据。航天局有早期的清单，看起来很像现代的电子表格。它们是由一系列列和一长串行组成的计算机文件。

可以想象，在一个小型黑白终端上管理一个有一百万行的表可能会变得很困难。大约在同一时间，航天局使用了第一个关系数据库。这些数据库将数据分成几组表格。这些表格看起来仍然像电子表格，但代表的数据块更小。

然后，他们在这些表之间创建关系。他们可以创建 50 个表，每个表包含 20，000 个零件，而不是一个包含一百万个零件的长列表。这就是为什么这些被称为关系数据库。该数据库基于彼此有关系的多组表。甚至早期的数据库工程师也在努力创建一种有效的方法来对数据库表进行分组。他们创建了地图来显示表格之间的关系。他们称这些地图为图式。模式使关系数据库要么易于使用，要么难以管理。

即使有了这些早期的数据库，您也可以看到工程师们在创建模式时是如何的艰难。他们应该围绕最大的部分创建表格吗？也许做一张桌子只放推进器，然后另一张桌子放燃料箱？这里的问题是，如果你改变了火箭的设计，那么你也必须改变数据库的设计。

也许您可以根据零件制造商创建表格。问题是，你可能有一个生产数千个零件的制造商，而另一个制造商只生产几十个。这在今天仍然是一个挑战。关系数据库需要大量的前期设计。在开始收集数据之前，你必须对你的数据有很多了解。如果你错了，重新设计你的数据库会花费很多精力。

IBM 后来将他们为美国宇航局创造的 IMS 商业化了。在 20 世纪 70 年代中期，他们开发了一种结构化查询语言(SQL)来帮助他们的客户从系统中提取数据。这种语言仍然很流行。SQL 是一种优雅的语言，可以从几个不同的关系表中提取数据。它重新连接所有不同的表，并显示数据，就好像这些数据都存储在一个大表中一样。这个虚拟表通常被称为“视图”

多年来，关系数据库中增加了许多功能。它们催生了关系数据库管理系统(RDBMS)。像 IBM、Microsoft 和 Oracle 这样的公司仍然支持和开发关系数据库管理系统。

Note

您可能听说过的另一个关系数据库术语是 CRUD，它代表创建、读取、更新和删除。它描述了 RDBMS 的所有功能。有时人们会在“搜索”前面加一个 S，并使用缩写 SCRUD。

## 使用 ETL 将数据放入仓库

本节讨论的术语和概念由数据科学团队使用。尽量不要被语言淹没。如果您了解这些术语和挑战，您更有可能快速获得您需要的数据。

许多数据科学概念都是建立在以前对关系数据库的研究基础上的。几十年来，公司一直在捕捉和尝试分析数据。即使在今天，RDBMS 仍然是企业数据库的基石，您需要了解数据科学项目的 RDBMS 术语。在处理企业数据仓库(EDW)时，您可能会遇到 RDBMS 术语。EDW 是一种特殊类型的关系数据库，主要用于分析数据。传统数据库针对在线事务处理(OLTP)进行了优化。EDW 用于在线分析处理(OLAP)。

请这样想:典型的数据库侧重于实时处理数据，而 EDW 侧重于分析已经发生的事情。

让我们假设你有一个卖跑鞋的网站。你雇了一个工程师来创建你的数据库。她创建了许多不同的表和关系。有一个客户地址表，一个鞋子表，一个运输选项表，等等。web 服务器使用 SQL 语句收集数据。当顾客购买一双鞋时，他们的地址数据与该鞋相关联，web 服务器向顾客提供他或她的运送选项，并且该双鞋被运送。你希望这个数据库是快速和有效的，并侧重于快速回报。这个数据库是您的客户实时正在做的事情。这是一个 OLTP 数据库。

您还要求您的数据库工程师创建一个脚本，每天将数据上传到您的仓库。您的数据仓库针对分析处理进行了优化。这是一个专注于创建报告的 OLAP 数据库。

你让数据分析师创建一份报告，看看顾客的地址和他们购买的鞋子类型之间是否有任何联系，如图 [2-1](#Fig1) 所示。你发现温暖地区的人更有可能买颜色鲜艳的鞋子。您可以使用这些信息来更改您的网站，以便来自气候温暖地区的客户可以在页面顶部看到更轻便的鞋子。

![A427825_1_En_2_Fig1_HTML.jpg](img/A427825_1_En_2_Fig1_HTML.jpg)

图 2-1。

Color brightness average by state Note

参见如何在 [`http://ds.tips/trAp8`](http://ds.tips/trAp8) 创建此图表。

现在假设你的网站变得非常成功，并被一家销售各种运动服装的公司收购。该公司的所有网站都有一个仓库，他们希望将您网站的数据与他们所有其他网站的数据结合起来。在这一点上，该公司将做一些所谓的 ETL，这意味着提取，转换和加载。他们从您的网站获取数据，然后将数据加载到他们的 EDW 中。

当他们提取您的数据时，他们会尝试以某种标准格式这样做，这样他们就可以将数据转换成适合他们的数据仓库的东西。他们仓库中的表可能有不同的模式。例如，数据仓库可能在 customer 表中有运输信息，而您的数据库在自己的表中有运输信息。数据必须经过转换才能进入 EDW。数据分析师很可能会将大部分时间花在清理和连接数据上，以使其适合数据，最后将转换后的数据加载到仓库中。

前面的场景并不是您可能需要执行 ETL 的唯一场景。一些公司可能有一个独立于 Hadoop 集群的数据仓库，在这种情况下，他们需要对仓库数据运行 ETL，以将其移动到 Hadoop 集群中。在这种情况下，数据分析师需要转换数据，以便可以在集群中使用。

许多组织经常将 Hadoop 视为昂贵的数据仓库的替代品。他们希望通过将数据存储在廉价的硬件上而不是昂贵的仓库设备上来节省资金。在这种情况下，公司可能会重写他们的 ETL 程序，以便他们可以将数据加载到 Hadoop 集群中，然后逐步淘汰或关闭仓库。

## 放下和 NoSQL 的过去

通常，数据科学团队需要更灵活的方式来存储数据。记住，关系数据库依赖于模式。在将数据放入数据库之前，您需要了解很多关于数据的信息，这意味着您必须提前做好计划。您必须知道什么类型的数据出现在数据库字段中(文本、视频、音频或其他)，将这些字段组织成表，然后创建表关系。数据库需要一个固定的结构，这样你就可以创建、读取、更新和删除你的记录。对于一些非常大的数据库，这种开销会使您的服务器陷入困境。

让我们回到你的跑鞋网站。一位顾客找到一双鞋，然后来到结账页面。此时，网站将购买的一双鞋与顾客的地址联系起来。这个结帐页面需要访问四个不同的数据库表:

*   鞋桌
*   客户表
*   地址表
*   装运台

对于数据库来说，这是很大的工作量。你的数据库越努力，你的网站越慢。

你如何加快速度？您是否需要购买一个更大的服务器，将您的表分在几个服务器上，或者让几个服务器在网络上同步？对于非常大的网站，这些选项可能看起来不自然。

现在，设想一个数据库，它将结帐页面中的所有内容存储为一个事务。数据库事务是必须完成的要么全有要么全无的工作。一气呵成，一气呵成，一气呵成，一气呵成。如果数据没有拆分到表中，也不需要查询任何关系，那会怎么样呢？信息被输入，你就大功告成了。

这是 NoSQL 背后的想法。NoSQL 最初是作为一个 Twitter 标签，供想要超越关系数据库的开发人员使用。实际上并不是对 SQL 的猛烈抨击。事实上，NoSQL 和 SQL 没有太多的关系。更多的是关系数据库的局限性。一般来说，NoSQL 数据库应该是非关系的、无模式的、集群友好的，并且最好是开源的。

所有这些品质都应该吸引数据科学团队。非关系型数据库通常更容易更改，也更容易使用。您的 web 应用程序的外观和您存储数据的方式之间不一定存在脱节。您也不必经历创建和拆分已经存在的表的丑陋过程。这通常被称为规范化数据库。没有模式，你就不必担心事先知道所有的事情。

回到跑鞋网站。它被一家更大的公司收购了。这家公司想把你的客户加入他们的常客计划。对于关系数据库，这是一个严重的架构挑战。客户表中应该有经常购买者的号码吗？您是否需要创建一个全新的表来存储经常购买者的号码？一个客户可以有多个买家编号吗？两个客户可以共用一个号码吗？在将客户加入常客计划之前，所有这些问题都需要解决。你必须重做数据库，并找出如何纠正丢失的数据。

没有模式，新字段几乎变得微不足道。您只需将它存储为一个事务。如果客户有一个频繁的买家编号，它会出现在交易中。如果客户没有，则该字段不存在。

最后，NoSQL 数据库应该是集群友好的。您应该能够将数据存储在数百甚至数千个数据库服务器中。在 NoSQL，保存在事务中的记录称为集合。这些集合包含所有的数据:鞋子、顾客、地址和运输信息。这些聚合更容易在许多数据库服务器之间同步。大多数服务器在集群中工作。这允许它们在彼此之间同步，然后向其他集群发送更新。

Note

“集群”这个词听起来应该很熟悉。这与 Hadoop 处理数据集的方式相同。事实上，Hadoop 的大部分都是基于 HBase 构建的，h base 是一个开源的 NoSQL 数据库。

当你在数据科学团队工作时，你几乎肯定会遇到 NoSQL。对于许多组织来说，这是处理大型数据集的首选方式。由于其更简单的设计，开发人员也更容易创建可以快速发展为企业规模的 web 应用程序。

## 大数据问题

如前所述，大数据和数据科学如此紧密地交织在一起，以至于许多组织将它们视为一体。记住数据科学是用科学的方法提出有趣的问题。这并不意味着你需要大量的数据来问这些问题。大数据提供了丰富的新数据源，允许您提出用较小的数据集无法回答的问题。

大数据并不是一个真正的名词。在 NASA 最初的论文中， [<sup>1</sup>](#Fn1) 将其描述为“大数据问题”你可以从两个方面来理解这个问题:这是一个“大数据”问题或一个大的“数据问题”。如果你读整篇论文，似乎他们把重点放在了这个问题上。这与“大数据”无关。这是关于如何处理这些新数据的问题。十年后，麦肯锡的报告也提到了这一点。 [<sup>2</sup>](#Fn2) 在报告中，作者将大数据称为超出常用硬件和软件能力的数据。

那么，为什么将大数据视为一个问题而不是一个名词很重要呢？嗯，是因为很多做大数据项目的公司其实并没有大数据。它可能看起来很大，因为它有很多。这似乎也是一个问题，因为储存和收集起来是一个真正的挑战。但这不是“大数据问题”。

确定您是否存在大数据问题的一种方法是查看您的数据是否属于四个类别。你可以把这些分类记为四个 V。问自己这些问题:

*   我有大量的数据吗？
*   我有各种各样的数据吗？
*   数据是否以很高的速度进入？
*   我收集的数据有真实性吗？

要成为大数据，它需要具备所有这四个属性。

音量问题通常很简单。如果你每天收集数 Pb 的数据，你可能有足够的容量。当然，这可能并不总是一个问题。在不久的将来，也许一艾字节的容量会被认为是一个足够大的问题。

应该有各种各样的信息。可以有文字，视频，声音，图片。

对于速度，想想纽约证券交易所。他们每天处理数十亿笔交易。他们有大量的数据以高速流入。股票价格在几毫秒内涌入并波动。但是，都是同一类型的数据。通常只有股票代码和价格——大部分是文本。他们收集交易数据，而不是图片、声音或新闻故事。所以他们没有大数据问题。他们当然会收集大量数据，但他们现有的技术应该足以应对这一挑战。

最后，想想数据的准确性。假设你创建了一个数据库，收集了所有关于你网站的推文和脸书帖子。你收集视频、图片和文本。每天都有数 Pb 的数据流入您的集群。您运行报告来查看客户是否对您的产品感到满意。浏览完数据后，您会意识到没有一个问题可以决定客户的情绪。所有的努力都花在了收集无用的数据上，因为这些数据没有提供任何你需要的信息。

为了提供一个有趣的大数据问题的例子，想想围绕自动驾驶汽车的挑战。你需要收集什么类型的数据？你需要收集大量的视频、声音、交通报告和 GPS 定位信息——所有这些都以高速实时地流入数据库。然后，汽车必须找出哪些数据具有最高的准确性。路边的那个人是因为体育比赛而尖叫，还是因为有人站在路上而尖叫？人类驾驶员有几秒钟的时间来搞清楚这一点。大数据汽车必须立即处理视频、音频和交通坐标，然后决定是停下来还是忽略声音。这是一个真正的大数据问题。

Tip

试着记住大数据和数据科学的区别。大数据会让你提出更有趣的问题。这并不意味着所有有趣的问题都需要大数据。专注于科学。这样，不管你有什么数据，你总是能够提出最好的问题。

## 摘要

在本章中，您了解到因为数据科学围绕着有趣的数据，所以您经常需要使用几种类型的数据库。您了解了一些专门用于数据库的术语，以及该技术的一些基本概念和术语。您还看到了数据库是如何组织的。在第 3 章中，你将学习如何识别不同的数据类型。

Footnotes [1](#Fn1_source)

考克斯，迈克尔和大卫·埃尔斯沃斯。“面向核外可视化的应用控制的需求分页。”1997 年第八届可视化会议论文集，第 235 页起。IEEE 计算机学会出版社，1997 年。

  [2](#Fn2_source)

曼尼卡、詹姆斯、迈克尔·楚伊、布拉德·布朗、雅克·布欣、理查德·多布斯、查尔斯·罗克斯博格和安吉拉·h·拜尔斯。"大数据:创新、竞争和生产力的下一个前沿."(2011).